/*! Image Upload and Priview lib 2014-08-11 */
(function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)})(function(e){"use strict";e.support.fileInput=!(RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,r){return t=this.messages[t]||""+t,r&&e.each(r,function(e,r){t=t.replace("{"+e+"}",r)}),t},formData:function(e){return e.serializeArray()},add:function(t,r){(r.autoUpload||r.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&r.process().done(function(){r.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,r){var i=e-this.timestamp;return(!this.bitrate||!r||i>r)&&(this.bitrate=8*(t-this.loaded)*(1e3/i),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var r;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(r=[],e.each(t.formData,function(e,t){r.push({name:e,value:t})}),r):[]},_getTotal:function(t){var r=0;return e.each(t,function(e,t){r+=t.size||1}),r},_initProgressObject:function(t){var r={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,r):t._progress=r},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var r,i=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&i-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=i,r=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=r-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=r,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(i,r,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var r=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,r._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var r,i=this,a=t.files[0],o=t.multipart||!e.support.xhrFileUpload,n=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",a)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(a.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(r=this._getFormData(t),t.blob?r.push({name:n,value:t.blob}):e.each(t.files,function(e,i){r.push({name:t.paramName[e]||n,value:i})})):(i._isInstanceOf("FormData",t.formData)?r=t.formData:(r=new FormData,e.each(this._getFormData(t),function(e,t){r.append(t.name,t.value)})),t.blob?r.append(n,t.blob,a.name):e.each(t.files,function(e,a){(i._isInstanceOf("File",a)||i._isInstanceOf("Blob",a))&&r.append(t.paramName[e]||n,a,a.name)})),t.data=r):(t.contentType=a.type,t.data=t.blob||a),t.blob=null},_initIframeSettings:function(t){var r=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&r&&r!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var r=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],r.each(function(){for(var t=e(this),r=t.prop("name")||"files[]",a=(t.prop("files")||[1]).length;a;)i.push(r),a-=1}),i.length||(i=[r.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var r=e.extend({},this.options,t);return this._initFormSettings(r),this._initDataSettings(r),r},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,r,i){var a=e.Deferred(),o=a.promise();return r=r||this.options.context||o,t===!0?a.resolveWith(r,i):t===!1&&a.rejectWith(r,i),o.abort=a.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,r){var i=this,a=function(t){return e.Deferred().resolveWith(i,[t]).promise()};r.process=function(e,t){return(e||t)&&(r._processQueue=this._processQueue=(this._processQueue||a(this)).pipe(e,t)),this._processQueue||a(this)},r.submit=function(){return"pending"!==this.state()&&(r.jqXHR=this.jqXHR=i._trigger("submit",t,this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},r.abort=function(){return this.jqXHR?this.jqXHR.abort():i._getXHRPromise()},r.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},r.progress=function(){return this._progress},r.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),r=t&&t.split("-"),i=r&&r.length>1&&parseInt(r[1],10);return i&&i+1},_chunkedUpload:function(t,r){t.uploadedBytes=t.uploadedBytes||0;var i,a,o=this,n=t.files[0],s=n.size,l=t.uploadedBytes,c=t.maxChunkSize||s,d=this._blobSlice,p=e.Deferred(),u=p.promise();return this._isXHRUpload(t)&&d&&(l||s>c)&&!t.data?r?!0:l>=s?(n.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",n.error])):(a=function(){var r=e.extend({},t),u=r._progress.loaded;r.blob=d.call(n,l,l+c,n.type),r.chunkSize=r.blob.size,r.contentRange="bytes "+l+"-"+(l+r.chunkSize-1)+"/"+s,o._initXHRData(r),o._initProgressListener(r),i=(o._trigger("chunksend",null,r)!==!1&&e.ajax(r)||o._getXHRPromise(!1,r.context)).done(function(i,n,c){l=o._getUploadedBytes(c)||l+r.chunkSize,u+r.chunkSize-r._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-r.uploadedBytes,total:l-r.uploadedBytes}),r),t.uploadedBytes=r.uploadedBytes=l,r.result=i,r.textStatus=n,r.jqXHR=c,o._trigger("chunkdone",null,r),o._trigger("chunkalways",null,r),s>l?a():p.resolveWith(r.context,[i,n,c])}).fail(function(e,t,i){r.jqXHR=e,r.textStatus=t,r.errorThrown=i,o._trigger("chunkfail",null,r),o._trigger("chunkalways",null,r),p.rejectWith(r.context,[e,t,i])})},this._enhancePromise(u),u.abort=function(){return i.abort()},a(),u):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,r,i,a){var o=a._progress.total,n=a._response;o>a._progress.loaded&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),a),n.result=a.result=t,n.textStatus=a.textStatus=r,n.jqXHR=a.jqXHR=i,this._trigger("done",null,a)},_onFail:function(e,t,r,i){var a=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),a.jqXHR=i.jqXHR=e,a.textStatus=i.textStatus=t,a.errorThrown=i.errorThrown=r,this._trigger("fail",null,i)},_onAlways:function(e,t,r,i){this._trigger("always",null,i)},_onSend:function(t,r){r.submit||this._addConvenienceMethods(t,r);var i,a,o,n,s=this,l=s._getAJAXSettings(r),c=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,i=i||((a||s._trigger("send",t,l)===!1)&&s._getXHRPromise(!1,l.context,a)||s._chunkedUpload(l)||e.ajax(l)).done(function(e,t,r){s._onDone(e,t,r,l)}).fail(function(e,t,r){s._onFail(e,t,r,l)}).always(function(e,t,r){if(s._onAlways(e,t,r,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),n=o.pipe(c)):(this._sequence=this._sequence.pipe(c,c),n=this._sequence),n.abort=function(){return a=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(l.context,a),c())},this._enhancePromise(n)):c()},_onAdd:function(t,r){var i,a,o,n,s=this,l=!0,c=e.extend({},this.options,r),d=c.limitMultiFileUploads,p=this._getParamName(c);if((c.singleFileUploads||d)&&this._isXHRUpload(c))if(!c.singleFileUploads&&d)for(o=[],i=[],n=0;r.files.length>n;n+=d)o.push(r.files.slice(n,n+d)),a=p.slice(n,n+d),a.length||(a=p),i.push(a);else i=p;else o=[r.files],i=[p];return r.originalFiles=r.files,e.each(o||r.files,function(a,n){var c=e.extend({},r);return c.files=o?n:[n],c.paramName=i[a],s._initResponseObject(c),s._initProgressObject(c),s._addConvenienceMethods(t,c),l=s._trigger("add",t,c)}),l},_replaceFileInput:function(t){var r=t.clone(!0);e("<form></form>").append(r)[0].reset(),t.after(r).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?r[0]:i}),t[0]===this.element[0]&&(this.element=r)},_handleFileTreeEntry:function(t,r){var i,a=this,o=e.Deferred(),n=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return r=r||"",t.isFile?t._file?(t._file.relativePath=r,o.resolve(t._file)):t.file(function(e){e.relativePath=r,o.resolve(e)},n):t.isDirectory?(i=t.createReader(),i.readEntries(function(e){a._handleFileTreeEntries(e,r+t.name+"/").done(function(e){o.resolve(e)}).fail(n)},n)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,r){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,r)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var r=t.items;return r&&r.length&&(r[0].webkitGetAsEntry||r[0].getAsEntry)?this._handleFileTreeEntries(e.map(r,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var r,i,a=t.prop("webkitEntries")||t.prop("entries");if(a&&a.length)return this._handleFileTreeEntries(a);if(r=e.makeArray(t.prop("files")),r.length)void 0===r[0].name&&r[0].fileName&&e.each(r,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();r=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(r).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var r=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(e){i.files=e,r.options.replaceFileInput&&r._replaceFileInput(i.fileInput),r._trigger("change",t,i)!==!1&&r._onAdd(t,i)})},_onPaste:function(t){var r=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};return r&&r.length&&(e.each(r,function(e,t){var r=t.getAsFile&&t.getAsFile();r&&i.files.push(r)}),this._trigger("paste",t,i)===!1||this._onAdd(t,i)===!1)?!1:void 0},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=this,r=e.dataTransfer,i={};r&&r.files&&r.files.length&&(e.preventDefault(),this._getDroppedFiles(r).always(function(r){i.files=r,t._trigger("drop",e,i)!==!1&&t._onAdd(e,i)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var r=t.dataTransfer;if(r){if(this._trigger("dragover",t)===!1)return!1;-1!==e.inArray("Files",r.types)&&(r.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,r){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,r),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),r=t.pop();return t.shift(),RegExp(t.join("/"),r)},_isRegExpOption:function(t,r){return"url"!==t&&"string"===e.type(r)&&/^\/.*\/[igm]{0,3}$/.test(r)},_initDataAttributes:function(){var t=this,r=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,i){t._isRegExpOption(e,i)&&(i=t._getRegExp(i)),r[e]=i})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var r=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,r._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var r,i,a=this,o=e.Deferred(),n=o.promise();return n.abort=function(){return i=!0,r?r.abort():(o.reject(null,"abort","abort"),n)},this._getFileInputFiles(t.fileInput).always(function(e){i||(t.files=e,r=a._onSend(null,t).then(function(e,t,r){o.resolve(e,t,r)},function(e,t,r){o.reject(e,t,r)}))}),this._enhancePromise(n)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){var t=function(){};e.extend(t.prototype,{name:"slides",options:{fx:"fade",speed:700,pager:!1,nav:!0,easing:"swing",visibleClass:"current-slide",activePagerClass:"active"},initialize:function(t,r){r=e.extend({},this.options,r),t.attr("data-slides")&&e.each(t.attr("data-slides").split(";"),function(e,t){var i=t.match(/\s*([A-Z_]*?)\s*:\s*(.+)\s*/i);i&&(r[i[1]]=i[2])});var i=t.children(),a=i.size(),o=parseInt(r.speed),n=0,s='<div class="slide-nav"><a class="next"><span></span></a><a class="prev"><span></span></a></div>',l=r.visibleClass,c=r.activePagerClass,d={position:"relative",display:"block","z-index":1},p={"float":"none",position:"absolute","z-index":0},u=function(){var i,o,s=n;if("on"==r.pager){var i=e('<div class="slide-pager"></div>');t.append(i);for(var d=0;a>d;d++)i.append("<a>"+(d+1)+"</a>")}else if("on"!=r.pager&&1!=r.pager)i=e(r.pager);else{var i=e('<div class="slide-pager"></div>');t.append(i);for(var d=0;a>d;d++)i.append("<a>"+(d+1)+"</a>")}r.pager=i,o=i.children(),o.on("click",function(){return s=e(this).index(),n===s||t.find("."+l+":animated").length?!1:s>a-1||0>s?(alert("Pager out of bounds"),void 0):(o.removeClass(c),e(this).addClass(c),n=s,h(n),!1)})},h=function(n){switch(r.fx){case"fade":i.stop().fadeOut(o,r.easing,function(){e(this).removeClass(l).css(p)}).eq(n).fadeIn(o,r.easing,function(){e(this).addClass(l).css(d)});break;case"slide":var s=t.find("."+l).index();0===s&&n===a-1?f(s,n):s===a-1&&0===n?g(s,n):n>s?g(s,n):s>n&&f(s,n)}},g=function(e,a){var o=t.width();i.eq(e).animate({left:-o},r.speed,r.easing).removeClass(l).css(p),i.eq(a).css({left:o}).show().animate({left:"0px"},r.speed,r.easing,function(){i.eq(e).hide()}).addClass(l).css(d)},f=function(e,a){var o=t.width();i.eq(e).animate({left:o},r.speed,r.easing).removeClass(l).css(p),i.eq(a).css({left:-o}).show().animate({left:"0px"},r.speed,r.easing,function(){i.eq(e).hide()}).addClass(l).css(d)};a>1&&(r.nav&&"off"!=r.nav&&"false"!=r.nav?t.append(s).addClass("slides clearfix"):t.addClass("slides clearfix"),i.hide().eq(0).addClass(l).css(d).show(),r.pager&&u(),r.pager&&e(r.pager).children().eq(n).addClass(c)),t.find(".next").on("click",function(){return t.find("."+l+":animated").length?!1:(n>=a-1?n=0:n++,r.pager&&e(r.pager).children().removeClass(c).eq(n).addClass(c),h(n),void 0)}),t.find(".prev").on("click",function(){return t.find("."+l+":animated").length?!1:(n>0?n--:n=a-1,r.pager&&e(r.pager).children().removeClass(c).eq(n).addClass(c),h(n),void 0)})}}),e.fn[t.prototype.name]=function(){var r=arguments,i=r[0]?r[0]:null;return this.each(function(){var a=e(this);if(t.prototype[i]&&a.data(t.prototype.name)&&"initialize"!=i)a.data(t.prototype.name)[i].apply(a.data(t.prototype.name),Array.prototype.slice.call(r,1));else if(!i||e.isPlainObject(i)){var o=new t;t.prototype.initialize&&o.initialize.apply(o,e.merge([a],r)),a.data(t.prototype.name,o)}else e.error("Method "+i+" does not exist on jQuery."+t.name)})}}(jQuery),function(b){var j,m,s,q,e,C,l,B,k,y,z,D,r=0,c={},o=[],p=0,a={},f=[],A=null,t=new Image,E,F=1,G=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,K=/[^\.]\.(swf)\s*$/i,H=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/,L=/youtu\.be\/(.*)/,I=/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/,M=/\.(mp4|ogv|webm|flv)(.*)?$/i,u=0,v="",n,h,i=!1,w=b.extend(b("<div/>")[0],{prop:0});_abort=function(){s.hide(),t.onerror=t.onload=null,A&&A.abort(),m.empty()},_error=function(){!1===c.onError(o,r,c)?(s.hide(),i=!1):(c.titleShow=!1,c.width="auto",c.height="auto",m.html('<p id="lightbox-error">\u4f60\u67e5\u770b\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u8bf7\u786e\u8ba4\u4e0a\u4f20\u662f\u5426\u6b63\u786e\uff01</p>'),_process_inline())},_start=function(){var d=o[r],a,g,e,h,k,f;if(_abort(),c=b.extend({},j.defaults,b(d).data(j.name)===void 0?c:b(d).data(j.name)),b(d).attr("data-lightbox")&&b.each(b(d).attr("data-lightbox").split(";"),function(a,d){var b=d.match(/\s*([A-Z_]*?)\s*:\s*(.+)\s*/i);b&&(c[b[1]]=b[2],"true"===c[b[1]]||"false"===c[b[1]])&&(c[b[1]]=eval(b[2]))}),f=c.onStart(o,r,c),f===!1)i=!1;else if("object"==typeof f&&(c=b.extend(c,f)),e=c.title||(d.nodeName?b(d).attr("title"):d.title)||"",d.nodeName&&!c.orig&&(c.orig=b(d).children("img:first").length?b(d).children("img:first"):b(d)),""===e&&c.orig&&c.titleFromAlt&&(e=c.orig.attr("alt")),a=c.href||(d.nodeName?b(d).attr("href"):d.href)||null,(/^(?:javascript)/i.test(a)||"#"==a)&&(a=null),c.type?(g=c.type,a||(a=c.content)):c.content?g="html":a&&(a.match(G)?g="image":a.match(K)?g="swf":a.match(M)?g="video":a.match(H)?(a=a.replace(H,"$1/embed/$2?$3").replace("/(.*)?$/","")+"wmode=opaque",g="iframe"):a.match(L)?(g=a.split("/"),a="//www.youtube.com/embed/"+g[g.length-1],g="iframe"):a.match(I)?(a=a.replace(I,"$1player.vimeo.com/video/$2"),g="iframe"):g=-1!=a.indexOf("http://")&&-1==a.indexOf(location.hostname.toLowerCase())?"iframe":0===a.indexOf("#")?"inline":"ajax"),g)switch("inline"==g&&(d=a.substr(a.indexOf("#")),g=b(d).length>0?"inline":"ajax"),c.type=g,c.href=a,c.title=e,c.autoDimensions&&"iframe"!==c.type&&"swf"!==c.type&&"video"!==c.type&&"widget"!==c.type&&(c.width="auto",c.height="auto"),c.modal&&(c.overlayShow=!0,c.hideOnOverlayClick=!1,c.hideOnContentClick=!1,c.enableEscapeButton=!1,c.showCloseButton=!1),c.padding=parseInt(c.padding,10),c.margin=parseInt(c.margin,10),m.css("padding",c.padding+c.margin),b(".lightbox-inline-tmp").unbind("lightbox-cancel").bind("lightbox-change",function(){b(this).replaceWith(l.children())}),g){case"html":m.html(c.content),_process_inline();break;case"video":i=!1,c.scrolling="no",d="auto"==c.width?320:c.width,e="auto"==c.height?240:c.height,g=[],g.push('src="'+a+'"'),g.push('width="'+d+'"'),g.push('height="'+e+'"'),g.push('preload="none"'),"undefined"!=b.type(c.autoplay)&&g.push('autoplay="'+(c.autoplay+"")+'"'),"undefined"!=b.type(c.controls)&&g.push('controls="'+(c.controls+"")+'"'),"undefined"!=b.type(c.loop)&&g.push('loop="'+(c.loop+"")+'"'),"undefined"!=b.type(c.poster)&&g.push('poster="'+(c.poster+"")+'"'),m.html("<video "+g.join(" ")+" /></video>"),b.fn.mediaelementplayer&&b("video",m).mediaelementplayer(),c.width="auto",c.height="auto",_process_inline();break;case"inline":if(b(d).parent().is("#lightbox-content")===!0){i=!1;break}b('<div class="lightbox-inline-tmp" />').hide().insertBefore(b(d)).bind("lightbox-cleanup",function(){b(this).replaceWith(l.children())}).bind("lightbox-cancel",function(){b(this).replaceWith(m.children())}),b(d).appendTo(m),_process_inline();break;case"image":i=!1,j.showActivity(),t=new Image,t.onerror=function(){_error()},t.onload=function(){i=!0,t.onerror=t.onload=null,_process_image()},t.src=a;break;case"swf":c.scrolling="no",c.autoDimensions=!1,h='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+c.width+'" height="'+c.height+'"><param name="movie" value="'+a+'"></param>',k="",b.each(c.swf,function(e,t){h+='<param name="'+e+'" value="'+t+'"></param>',k+=" "+e+'="'+t+'"'}),h+='<embed src="'+a+'" type="application/x-shockwave-flash" width="'+c.width+'" height="'+c.height+'"'+k+"></embed></object>",m.html(h),_process_inline();break;case"ajax":i=!1,j.showActivity(),c.ajax.win=c.ajax.success,A=b.ajax(b.extend({},c.ajax,{url:a,data:c.ajax.data||{},error:function(e){e.status>0&&_error()},success:function(e,t,r){if(200==("object"==typeof r?r:A).status){if("function"==typeof c.ajax.win){if(f=c.ajax.win(a,e,t,r),f===!1)return s.hide(),void 0;("string"==typeof f||"object"==typeof f)&&(e=f)}m.html(e),_process_inline()}}}));break;case"iframe":c.autoDimensions=!1,_show()}else _error()},_process_inline=function(){m.wrapInner('<div style="width:'+("auto"==c.width?"auto":c.width+"px")+";height:"+("auto"==c.height?"auto":c.height+"px")+";overflow: "+("auto"==c.scrolling?"auto":"yes"==c.scrolling?"scroll":"hidden")+'"></div>'),c.width=m.width(),c.height=m.height(),_show()},_process_image=function(){c.width=t.width,c.height=t.height,b("<img />").attr({id:"lightbox-img",src:t.src,alt:c.title}).appendTo(m),_show()},_show=function(){var t,d;s.hide(),e.is(":visible")&&!1===a.onCleanup(f,p,a)?(b.event.trigger("lightbox-cancel"),i=!1):(i=!0,b(l.add(q)).unbind(),b(window).unbind("resize.fb scroll.fb"),b(document).unbind("keydown.fb"),e.is(":visible")&&"outside"!==a.titlePosition&&e.css("height",e.height()),f=o,p=r,a=c,a.overlayShow?(q.css({"background-color":a.overlayColor,opacity:a.overlayOpacity,cursor:a.hideOnOverlayClick?"pointer":"auto",height:b(document).height()}),q.is(":visible")||q.show()):q.hide(),h=_get_zoom_to(),_process_title(),e.is(":visible")?(b(B.add(y).add(z)).hide(),t=e.position(),n={top:t.top,left:t.left,width:e.width(),height:e.height()},d=n.width==h.width&&n.height==h.height,l.fadeTo(a.changeFade,.3,function(){var e=function(){l.html(m.contents()).fadeTo(a.changeFade,1,_finish)};b.event.trigger("lightbox-change"),l.empty().removeAttr("filter").css({"border-width":a.padding,width:h.width-2*a.padding,height:"image"==a.type||"swf"==a.type||"iframe"==a.type?h.height-u-2*a.padding:"auto"}),d?e():(w.prop=0,b(w).animate({prop:1},{duration:a.changeSpeed,easing:a.easingChange,step:_draw,complete:e}))})):(e.removeAttr("style"),l.css("border-width",a.padding),l.css("-webkit-transform","translateZ(0)"),"elastic"==a.transitionIn?(n=_get_zoom_from(),l.html(m.contents()),e.show(),a.opacity&&(h.opacity=0),w.prop=0,b(w).animate({prop:1},{duration:a.speedIn,easing:a.easingIn,step:_draw,complete:_finish})):("inside"==a.titlePosition&&u>0&&k.show(),l.css({width:h.width-2*a.padding,height:"image"==a.type||"swf"==a.type||"iframe"==a.type?h.height-u-2*a.padding:"auto"}).html(m.contents()),e.css(h).fadeIn("none"==a.transitionIn?0:a.speedIn,_finish))))},_format_title=function(e){return e&&e.length?'<div id="lightbox-title-'+a.titlePosition+'">'+e+"</div>":!1},_process_title=function(){if(v=a.title||"",u=0,k.empty().removeAttr("style").removeClass(),a.titleShow!==!1&&(v=b.isFunction(a.titleFormat)?a.titleFormat(v,f,p,a):_format_title(v))&&""!==v)switch(k.addClass("lightbox-title-"+a.titlePosition).html(v).appendTo("body").show(),a.titlePosition){case"inside":k.css({width:h.width-2*a.padding,marginLeft:a.padding,marginRight:a.padding}),u=k.outerHeight(!0),k.appendTo(C),h.height+=u;break;case"over":k.css({marginLeft:a.padding,width:h.width-2*a.padding,bottom:a.padding}).appendTo(C);break;case"float":k.css("left",-1*parseInt((k.width()-h.width-40)/2,10)).appendTo(e);break;default:k.css({width:h.width-2*a.padding,paddingLeft:a.padding,paddingRight:a.padding}).appendTo(e)}k.hide()},_set_navigation=function(){(a.enableEscapeButton||a.enableKeyboardNav)&&b(document).bind("keydown.fb",function(e){27==e.keyCode&&a.enableEscapeButton?(e.preventDefault(),j.close()):37!=e.keyCode&&39!=e.keyCode||!a.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),j[37==e.keyCode?"prev":"next"]())}),a.showNavArrows?((a.cyclic&&f.length>1||0!==p)&&y.show(),(a.cyclic&&f.length>1||p!=f.length-1)&&z.show()):(y.hide(),z.hide())},_finish=function(){b.support.opacity||(l.get(0).style.removeAttribute("filter"),e.get(0).style.removeAttribute("filter")),e.css("height","auto"),"image"!==a.type&&"swf"!==a.type&&"iframe"!==a.type&&l.css("height","auto"),v&&v.length&&k.show(),a.showCloseButton&&B.show(),_set_navigation(),a.hideOnContentClick&&l.bind("click",j.close),a.hideOnOverlayClick&&q.bind("click",j.close),b(window).bind("resize.fb",j.resize),a.centerOnScroll&&b(window).bind("scroll.fb",j.center),"iframe"==a.type&&b('<iframe id="lightbox-frame" name="lightbox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(b.browser.msie?'allowtransparency="true""':"")+' scrolling="'+c.scrolling+'" src="'+a.href+'"></iframe>').appendTo(l),e.show(),i=!1,j.center(),a.onComplete(f,p,a),_preload_images()},_preload_images=function(){var e,t;f.length-1>p&&(e=f[p+1].href,e!==void 0&&e.match(G))&&(t=new Image,t.src=e),p>0&&(e=f[p-1].href,e!==void 0&&e.match(G))&&(t=new Image,t.src=e)},_draw=function(t){var r={width:parseInt(n.width+(h.width-n.width)*t,10),height:parseInt(n.height+(h.height-n.height)*t,10),top:parseInt(n.top+(h.top-n.top)*t,10),left:parseInt(n.left+(h.left-n.left)*t,10)};h.opacity!==void 0&&(r.opacity=.5>t?.5:t),e.css(r),l.css({width:r.width-2*a.padding,height:r.height-u*t-2*a.padding})},_get_viewport=function(){return[b(window).width()-2*a.margin,b(window).height()-2*a.margin,b(document).scrollLeft()+a.margin,b(document).scrollTop()+a.margin]},_get_zoom_to=function(){var e=_get_viewport(),t={},r=a.autoScale,i=2*a.padding;return t.width=(""+a.width).indexOf("%")>-1?parseInt(e[0]*parseFloat(a.width)/100,10):parseInt(a.width)+i,t.height=(""+a.height).indexOf("%")>-1?parseInt(e[1]*parseFloat(a.height)/100,10):parseInt(a.height)+i,r&&(t.width>e[0]||t.height>e[1])&&("image"==c.type||"swf"==c.type?(r=a.width/a.height,t.width>e[0]&&(t.width=e[0],t.height=parseInt((t.width-i)/r+i,10)),t.height>e[1]&&(t.height=e[1],t.width=parseInt((t.height-i)*r+i,10))):(t.width=Math.min(t.width,e[0]),t.height=Math.min(t.height,e[1]))),t.top=parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-t.height-40)),10),t.left=parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-t.width-40)),10),t},_get_obj_pos=function(e){var t=e.offset();return t.top+=parseInt(e.css("paddingTop"),10)||0,t.left+=parseInt(e.css("paddingLeft"),10)||0,t.top+=parseInt(e.css("border-top-width"),10)||0,t.left+=parseInt(e.css("border-left-width"),10)||0,t.width=e.width(),t.height=e.height(),t},_get_zoom_from=function(){var e=c.orig?b(c.orig):!1,t={};return e&&e.length?(e=_get_obj_pos(e),t={width:e.width+2*a.padding,height:e.height+2*a.padding,top:e.top-a.padding-20,left:e.left-a.padding-20}):(e=_get_viewport(),t={width:2*a.padding,height:2*a.padding,top:parseInt(e[3]+.5*e[1],10),left:parseInt(e[2]+.5*e[0],10)}),t},_animate_loading=function(){};var x=function(){};x.prototype=b.extend(x.prototype,{name:"lightbox",defaults:{padding:10,margin:40,opacity:!1,modal:!1,cyclic:!0,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!1,centerOnScroll:!0,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.6,overlayColor:"#000",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"elastic",transitionOut:"elastic",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},init:function(){var t=this;b("#lightbox-wrap").length||(b("body").append(m=b('<div id="lightbox-tmp"></div>'),s=b('<div id="lightbox-loading"><div></div></div>'),q=b('<div id="lightbox-overlay"></div>'),e=b('<div id="lightbox-wrap"></div>')),D=q.show().position(),q.hide(),0!=D.top&&q.css("top",-1*D.top),C=b('<div id="lightbox-outer"></div>').appendTo(e),C.append(l=b('<div id="lightbox-content"></div>'),B=b('<a id="lightbox-close"><span></span></a>'),k=b('<div id="lightbox-title"></div>'),y=b('<a href="javascript:;" id="lightbox-left"><span id="lightbox-left-ico"></span></a>'),z=b('<a href="javascript:;" id="lightbox-right"><span id="lightbox-right-ico"></span></a>')),B.bind("click",this.close),s.bind("click",this.cancel),y.bind("click",function(e){e.preventDefault(),t.prev()}),z.bind("click",function(e){e.preventDefault(),t.next()}),b.fn.mousewheel&&e.bind("mousewheel.fb",function(e,r){(i||"image"==a.type)&&e.preventDefault(),t[r>0?"prev":"next"]()}))},open:function(e,t){var a;if(!i){if(i=!0,a=t!==void 0?t:{},o=[],r=parseInt(a.index,10)||0,b.isArray(e)){for(var n=0,s=e.length;s>n;n++)"object"==typeof e[n]?b(e[n]).data(j.name,b.extend({},a,e[n])):e[n]=b({}).data(j.name,b.extend({content:e[n]},a));o=b.merge(o,e)}else"object"==typeof e?b(e).data(j.name,b.extend({},a,e)):e=b({}).data(j.name,b.extend({content:e},a)),o.push(e);
(r>o.length||0>r)&&(r=0),_start()}},showActivity:function(){clearInterval(E),s.show(),E=setInterval(_animate_loading,66)},hideActivity:function(){s.hide()},next:function(){return this.pos(p+1)},prev:function(){return this.pos(p-1)},pos:function(e){i||(e=parseInt(e),o=f,e>-1&&f.length>e?(r=e,_start()):a.cyclic&&f.length>1&&(r=e>=f.length?0:f.length-1,_start()))},cancel:function(){i||(i=!0,b.event.trigger("lightbox-cancel"),_abort(),c.onCancel(o,r,c),i=!1)},close:function(){function t(){q.fadeOut("fast"),k.empty().hide(),e.hide(),b.event.trigger("lightbox-cleanup"),l.empty(),a.onClosed(f,p,a),f=c=[],p=r=0,a=c={},i=!1}if(!i&&!e.is(":hidden"))if(i=!0,a&&!1===a.onCleanup(f,p,a))i=!1;else if(_abort(),b(B.add(y).add(z)).hide(),b(l.add(q)).unbind(),b(window).unbind("resize.fb scroll.fb"),b(document).unbind("keydown.fb"),l.find("iframe").attr("src","about:blank"),"inside"!==a.titlePosition&&k.empty(),e.stop(),"elastic"==a.transitionOut){n=_get_zoom_from();var o=e.position();h={top:o.top,left:o.left,width:e.width(),height:e.height()},a.opacity&&(h.opacity=1),k.empty().hide(),w.prop=1,b(w).animate({prop:0},{duration:a.speedOut,easing:a.easingOut,step:_draw,complete:t})}else e.fadeOut("none"==a.transitionOut?0:a.speedOut,t)},resize:function(){switch(q.is(":visible")&&q.css("height",b(document).height()),h=_get_zoom_to(),a.titlePosition){case"float":k.css("left",-1*parseInt((k.width()-h.width-40)/2,10));break;default:k.css("width",h.width-2*a.padding)}e.is(":visible")&&(pos=e.position(),n={top:pos.top,left:pos.left,width:e.width(),height:e.height()},equal=n.width==h.width&&n.height==h.height,l.css({width:h.width-2*a.padding,height:"image"==a.type||"swf"==a.type||"iframe"==a.type?h.height-u-2*a.padding:"auto"}),!equal)&&(w.prop=0,b(w).animate({prop:1},{duration:a.changeSpeed,easing:a.easingChange,step:_draw})),j.center(!0)},center:function(t){var r,o;i||(o=t===!0?1:0,r=_get_viewport(),!o&&(e.width()>r[0]||e.height()>r[1]))||e.stop().animate({top:parseInt(Math.max(r[3]-20,r[3]+.5*(r[1]-l.height()-40)-a.padding)),left:parseInt(Math.max(r[2]-20,r[2]+.5*(r[0]-l.width()-40)-a.padding))},"number"==typeof t?t:200)}}),b.fn[x.prototype.name]=function(){var e=arguments,t=e[0]?e[0]:{};return this.each(function(){b(this).data(x.prototype.name,t).unbind("click."+x.prototype.name).bind("click."+x.prototype.name,function(e){e.preventDefault(),i||(i=!0,b(this).blur(),o=[],r=0,(e=b(this).attr("data-lightbox")||"")&&(e=e.match(/group:([^;]+)/i))?(o=b('a[data-lightbox*="'+e[0]+'"], area[data-lightbox*="'+e[0]+'"]'),r=o.index(this)):o.push(this),_start())})})},b(document).ready(function(){j=new x,j.init(),b[x.prototype.name]=j})}(jQuery),function(e){var t=function(){};e.extend(t.prototype,{name:"overlayer",options:{effect:"fade",duration:300,easing:"swing",cls:"overlayer",invert:!1,overlaySelector:".overlay",overlayDefault:"overlay-default"},initialize:function(t,r){r=e.extend({},this.options,r),t.attr("data-overlayer")&&e.each(t.attr("data-overlayer").split(";"),function(e,t){var i=t.match(/\s*([A-Z_]*?)\s*:\s*(.+)\s*/i);i&&(r[i[1]]=i[2])}),r.duration=Math.floor(r.duration);var i=t.children(r.overlaySelector).first();i.length||(i=e("<div>").addClass(r.overlayDefault).appendTo(t)),i.css({position:"absolute",visibility:"hidden",display:"block"}).wrapInner("<div>"),t.css({position:"relative",overflow:"hidden"}).addClass(r.cls),r.invert?(e(window).load(function(){switch(i.stop().css({visibility:"visible",width:t.width(),height:"top"==r.effect||"bottom"==r.effect?"auto":t.height()}),r.effect){case"right":i.css({right:-1*i.width(),top:0,bottom:0}).animate({right:0},r.duration,r.easing);break;case"left":i.css({left:-1*i.width(),top:0,bottom:0}).animate({left:0},r.duration,r.easing);break;case"top":i.css({left:0,top:-1*i.height()}).animate({top:0},r.duration,r.easing);break;case"bottom":i.css({left:0,bottom:-1*i.height()}).animate({bottom:0},r.duration,r.easing);break;default:i.show().css({opacity:0,top:0,left:0}).animate({opacity:1},r.duration,r.easing,function(){e.browser.msie&&(i.get(0).filter="",i.attr("style",(i.attr("style")+"").replace(/alpha\(opacity=([\d.]+)\)/i,"")))})}}),t.bind({mouseleave:function(){switch(i.stop().css({visibility:"visible",width:t.width(),height:"top"==r.effect||"bottom"==r.effect?"auto":t.height()}),r.effect){case"right":i.css({right:-1*i.width(),top:0,bottom:0}).animate({right:0},r.duration,r.easing);break;case"left":i.css({left:-1*i.width(),top:0,bottom:0}).animate({left:0},r.duration,r.easing);break;case"top":i.css({left:0,top:-1*i.height()}).animate({top:0},r.duration,r.easing);break;case"bottom":i.css({left:0,bottom:-1*i.height()}).animate({bottom:0},r.duration,r.easing);break;default:i.show().css({opacity:0,top:0,left:0}).animate({opacity:1},r.duration,r.easing,function(){e.browser.msie&&(i.get(0).filter="",i.attr("style",(i.attr("style")+"").replace(/alpha\(opacity=([\d.]+)\)/i,"")))})}},mouseenter:function(){switch(i.stop(),r.effect){case"right":i.animate({right:-1*i.width()},r.duration,r.easing);break;case"left":i.animate({left:-1*i.width()},r.duration,r.easing);break;case"top":i.animate({top:-1*i.height()},r.duration,r.easing);break;case"bottom":i.animate({bottom:-1*i.height()},r.duration,r.easing);break;default:i.animate({opacity:0},r.duration,r.easing,function(){i.hide()})}}})):t.bind({mouseenter:function(){switch(i.stop().css({visibility:"visible",width:t.width(),height:"top"==r.effect||"bottom"==r.effect?"auto":t.height()}),r.effect){case"right":i.css({right:-1*i.width(),top:0,bottom:0}).animate({right:0},r.duration,r.easing);break;case"left":i.css({left:-1*i.width(),top:0,bottom:0}).animate({left:0},r.duration,r.easing);break;case"top":i.css({left:0,top:-1*i.height()}).animate({top:0},r.duration,r.easing);break;case"bottom":i.css({left:0,bottom:-1*i.height()}).animate({bottom:0},r.duration,r.easing);break;default:i.show().css({opacity:0,top:0,left:0}).animate({opacity:1},r.duration,r.easing,function(){e.browser.msie&&(i.get(0).filter="",i.attr("style",(i.attr("style")+"").replace(/alpha\(opacity=([\d.]+)\)/i,"")))})}},mouseleave:function(){switch(i.stop(),r.effect){case"right":i.animate({right:-1*i.width()},r.duration,r.easing);break;case"left":i.animate({left:-1*i.width()},r.duration,r.easing);break;case"top":i.animate({top:-1*i.height()},r.duration,r.easing);break;case"bottom":i.animate({bottom:-1*i.height()},r.duration,r.easing);break;default:i.animate({opacity:0},r.duration,r.easing,function(){i.hide()})}}})}}),e.fn[t.prototype.name]=function(){var r=arguments,i=r[0]?r[0]:null;return this.each(function(){var a=e(this);if(t.prototype[i]&&a.data(t.prototype.name)&&"initialize"!=i)a.data(t.prototype.name)[i].apply(a.data(t.prototype.name),Array.prototype.slice.call(r,1));else if(!i||e.isPlainObject(i)){var o=new t;t.prototype.initialize&&o.initialize.apply(o,e.merge([a],r)),a.data(t.prototype.name,o)}else e.error("Method "+i+" does not exist on jQuery."+t.name)})}}(jQuery),function(e){var t=function(){};e.extend(t.prototype,{name:"tooltip",options:{activation:"hover",maxwidth:220,gutter:5,sticky:!1,position:"top",delay:0,fadeIn:300,fadeOut:300,tipSelector:".tip-content"},initialize:function(t,r){r=e.extend({},this.options,r),t.attr("data-tooltip")&&e.each(t.attr("data-tooltip").split(";"),function(e,t){var i=t.match(/\s*([A-Z_]*?)\s*:\s*(.+)\s*/i);i&&(r[i[1]]=i[2])}),r.maxwidth=parseInt(r.maxwidth),r.gutter=parseInt(r.gutter),r.delay=parseInt(r.delay),r.fadeIn=parseInt(r.fadeIn),r.fadeOut=parseInt(r.fadeOut);var i=t.children(r.tipSelector).first(),a=i.length?i.html():t.attr("title"),o=i.length?!0:!1,n=!1;if(o||t.removeAttr("title"),0>=e("#tip_holder").length){var s=e("<div>",{id:"tip_holder"}),l=e("<div>",{id:"tip_content",Class:"clearfix"}),c=e("<div>",{id:"tip_arrow"}),d=e("<span>",{html:"",id:"close-tip"});e("body").append(s.html(l).prepend(d).prepend(c.html('<div id="tip_arrow_inner"></div>')))}else var s=e("#tip_holder"),l=e("#tip_content"),d=e("#close-tip"),c=e("#tip_arrow");var p=function(){l.empty().html(a),r.sticky?e(d).hide().show():e(d).hide(),s.css({"max-width":r.maxwidth+"px"})},u=function(){p(),s.hide().removeAttr("class").css("margin","0"),c.removeAttr("style");var i=parseInt(t.offset().top),a=parseInt(t.offset().left),o=parseInt(t.outerWidth()),l=parseInt(t.outerHeight()),d=s.outerWidth(),u=s.outerHeight(),h=Math.round((o-d)/2),g=Math.round((l-u)/2),f=Math.round(a+h),m=Math.round(i+l+r.gutter),b="",v="",w=Math.round(d-12)/2;"bottom"==r.position?b="_bottom":"top"==r.position?b="_top":"left"==r.position?b="_left":"right"==r.position&&(b="_right");var y=parseInt(e(window).scrollLeft())>h+a,_=d+a>parseInt(e(window).width());y&&0>h||"_right"==b&&!_||"_left"==b&&d+r.gutter+5>a?(b="_right",v=Math.round(u-13)/2,w=-12,f=Math.round(a+o+r.gutter),m=Math.round(i+g)):(_&&0>h||"_left"==b&&!y)&&(b="_left",v=Math.round(u-13)/2,w=Math.round(d),f=Math.round(a-(d+r.gutter+5)),m=Math.round(i+g));var $=i+l+r.gutter+u+8>parseInt(e(window).height()+e(window).scrollTop()),x=0>i+l-(r.gutter+u+8);$||"_bottom"==b&&$||"_top"==b&&!x?("_top"==b||"_bottom"==b?b="_top":b+="_top",v=u,m=Math.round(i-(u+5+r.gutter))):(x|("_top"==b&&x)||"_bottom"==b&&!$)&&("_top"==b||"_bottom"==b?b="_bottom":b+="_bottom",v=-12,m=Math.round(i+l+r.gutter)),"_right_top"==b||"_left_top"==b?m+=5:("_right_bottom"==b||"_left_bottom"==b)&&(m-=5),("_left_top"==b||"_left_bottom"==b)&&(f+=5),c.css({"margin-left":w+"px","margin-top":v+"px"}),s.css({"margin-left":f+"px","margin-top":m+"px"}).attr("class","tip"+b),n&&clearTimeout(n),n=setTimeout(function(){s.stop(!0,!0).fadeIn(r.fadeIn)},r.delay)},h=function(){n&&clearTimeout(n),s.fadeOut(r.fadeOut),d.hide()};d.on("click",function(){h()}),e(window).resize(function(){h()}),"hover"==r.activation?t.hover(function(){u()},function(){r.sticky||h()}):"focus"==r.activation?t.focus(function(){u()}).blur(function(){h()}):"click"==r.activation&&t.click(function(){return u(),!1}).hover(function(){},function(){r.sticky||h()})}}),e.fn[t.prototype.name]=function(){var r=arguments,i=r[0]?r[0]:null;return this.each(function(){var a=e(this);if(t.prototype[i]&&a.data(t.prototype.name)&&"initialize"!=i)a.data(t.prototype.name)[i].apply(a.data(t.prototype.name),Array.prototype.slice.call(r,1));else if(!i||e.isPlainObject(i)){var o=new t;t.prototype.initialize&&o.initialize.apply(o,e.merge([a],r)),a.data(t.prototype.name,o)}})}}(jQuery),jQuery(function(e){e("[data-slides]").slides(),e("[data-overlayer]").overlayer(),e("[data-lightbox]").lightbox(),e("[data-tooltip]").tooltip()});